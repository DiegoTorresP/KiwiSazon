<style>
  .navegador {
    background-color: #E6FCF2;
    /* Color de fondo */
  }

  .imagen {
    width: 50px;
    /* Tamaño de la imagen (ancho) */
    height: auto;
    /* Tamaño de la imagen (alto) (automático para mantener la proporción) */
  }

  .active {
    font-size: 20px;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  }

  a.noti{
  text-decoration: none;
  color: black;
}

a.noti:visited{
  color: black;
}

.box.noti::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	background-color: #F5F5F5;
  border-radius: 5px
}

.box.noti::-webkit-scrollbar
{
	width: 10px;
	background-color: #F5F5F5;
  border-radius: 5px
}

.box.noti::-webkit-scrollbar-thumb
{
	background-color: black;
	border: 2px solid black;
  border-radius: 5px
}

header.noti{
  -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  height: 110px;
  vertical-align: middle;
}

h1.noti{
 float: left;
  padding: 10px 30px
}

body.noti{
  margin: 0;
  padding: 0;
  font-family: 'Raleway', sans-serif;
}

.icons.noti{
  display: inline;
  float: right
}

.notification.noti{
  position: relative;
  display: inline-block;
}

.number.noti{
  height: 22px;
  width:  22px;
  background-color: #d63031;
  border-radius: 20px;
  color: white;
  text-align: center;
  position: absolute;
  top: 23px;
  left: 60px;
  padding: 3px;
  border-style: solid;
  border-width: 2px;
  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
}

.number.noti:empty {
   display: none;
}

.notBtn.noti{
  transition: 0.5s;
  cursor: pointer
}

.fas.noti{
  font-size: 25pt;
  padding-bottom: 10px;
  color: black;
  margin-right: 40px;
  margin-left: 40px;
}
/* Estilos para pantallas grandes */
@media screen and (min-width: 701px) {
  .box.noti{
  width: 400px;
  height: 0px;
  border-radius: 10px;
  transition: 0.5s;
  position: absolute;
  z-index: 10;
  overflow-y: scroll;
  left: -300px;
  padding: 0px;
  margin-top: 5px;
  background-color: #F4F4F4;
  -webkit-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.2);
  -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  cursor: context-menu;
}
}

/* Estilos para pantallas pequeñas (móviles) */
@media screen and (max-width: 700px) {
  .box.noti{
  width: 300px;
  height: 0px;
  border-radius: 10px;
  transition: 0.5s;
  position: absolute;
  z-index: 10;
  overflow-y: scroll;
  left: 13px;
  padding: 0px;
  margin-top: 5px;
  background-color: #F4F4F4;
  -webkit-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.2);
  -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
  cursor: context-menu;
}

}

.fas.noti:hover {
  color: #d63031;
}

.notBtn.noti:hover > .box.noti{
  height: 60vh
}

.content.noti{
  padding: 20px;
  color: black;
  vertical-align: middle;
  text-align: left;
}

.gry.noti{
  background-color: #F4F4F4;
}

.top.noti{
  color: black;
  padding: 10px
}

.display.noti{
  position: relative;
}

.cont.noti{
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: #F4F4F4;
}

.cont.noti:empty{
  display: none;
}

.stick.noti{
  text-align: center;  
  display: block;
  font-size: 50pt;
  padding-top: 70px;
  padding-left: 80px
}

.stick.noti:hover{
  color: black;
}

.cent.noti{
  text-align: center;
  display: block;
}

.sec.noti{
  padding: 25px 10px;
  background-color: #F4F4F4;
  transition: 0.5s;
}

.profCont.noti{
  padding-left: 15px;
}

.profile.noti{
  -webkit-clip-path: circle(50% at 50% 50%);
  clip-path: circle(50% at 50% 50%);
  width: 75px;
  float: left;
}

.txt.noti{
  vertical-align: top;
  font-size: 1rem;
  padding: 5px 10px 0px 115px;
}

.sub.noti{
  font-size: .75rem;
  color: grey;
}

.new.noti{
  border-style: none none solid none;
  border-color: red;
}

.sec:hover.noti{
  background-color: #BFBFBF;
}

.clear{
  text-decoration: none;
  padding: 20px;
  font-size: 15pt;
  color: darkolivegreen;
}
.clear:hover{
  text-decoration: none;
  padding: 20px;
  font-size: 20pt;
  color:#d63031
}

</style>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light navegador">
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Toggle button -->
    <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Navbar brand -->
      <% if(loginUser){ %>
        <% if(loginUser.rol == "user"){ %>
          <a class="navbar-brand mt-2 mt-lg-0" href="/home">
            <img src="/img/logo2.png" height="70" alt="MDB Logo" loading="lazy" />
          </a>
        <% } else { %>
          <a class="navbar-brand mt-2 mt-lg-0" href="/adminHome">
            <img src="/img/logo2.png" height="70" alt="MDB Logo" loading="lazy" />
          </a>
        <% } %>

        <% }else{ %>
          <a class="navbar-brand mt-2 mt-lg-0" href="/">
            <img src="/img/logo2.png" height="70" alt="MDB Logo" loading="lazy" />
          </a>
          <% } %>
          <!-- Left links -->
          <% if(loginUser){ %>
            <% if(loginUser.rol == "user"){ %>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link" href="/recetas/Todas las Recetas">Recetas</a>
                </li>
              </ul>
            <% } else { %>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link" href="/adminHome">Dashboard</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/adminRecetas">Validar recetas</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/adminCategorias">Categorias</a>
                </li>
              </ul>
            <% } %>
            <% }else{ %>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link" href="#"></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/receta/Todas las Recetas">Recetas</a>
                </li>
              </ul>
            <% } %>

            <!-- Left links -->
    </div>
    <!-- Collapsible wrapper -->

    <!-- Right elements -->
    <div class="d-flex align-items-center">
      <!--Notificaciones-->
      <% if(loginUser){ %>
      <div class = "notification noti">
        <a class="noti" href = "#">
        <div class = "notBtn noti" href = "#">
          <!--Number supports double digets and automaticly hides itself when there is nothing between divs -->
          <div class = "number noti"><%= notificaciones.length %></div>
          <i class="fas fa-bell noti"></i>
            <div class = "box noti">
              <% if(notificaciones.length!=0){ %>
              <div class="cent noti clear">
                <a href="/leerNotificaciones" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Marcar como leidas"><i class="fa-solid fa-eye"></i></a>
              </div>
              <% }else{ %>
                <div class="cent noti clear">
                  <span>No hay notificaciones.</span>
                </div>
              <% } %>
              <div class = "display noti">
                <div class = "nothing noti"> 
                  <i class="fas fa-child stick noti"></i> 
                  <div class = "cent noti">Looks Like your all caught up!</div>
                </div>
                <div class = "cont noti"><!-- Fold this div and try deleting evrything inbetween -->
                  <% notificaciones.forEach(function(notificacion) { %> 
                  <div class = "sec new noti">
                     <a class="noti" href = "/misRecetas">
                     <div class = "profCont noti">
                     <img class = "profile noti" src = "/img/notificacionesIcon.png">
                      </div>
                     <div class = "txt noti"><%= notificacion.message %></div>
                    <div class = "txt sub noti"><%= getFechaFormateada(notificacion.date) %></div>
                     </a>
                  </div>
                  <% }); %>
               </div>
              </div>
           </div>
        </div>
          </a>
      </div>

      <% if(loginUser.rol == "user"){ %>
        <div class = "notification noti">
          <%let favoritas=0 ;if(loginUser){favoritas=loginUser.followReceta.length} %> 
          <a class="noti" href = "/favoritas">
          <div class = "notBtn noti" href = "#">
            <!--Number supports double digets and automaticly hides itself when there is nothing between divs -->
            <div class = "number noti"><%= favoritas %></div>
            <i class="fas fa-heart noti"></i>
 
          </div>
            </a>
        </div>
        <% } %>


      <% } %>
      <!-- Avatar -->
      <div class="dropdown">
        <a class="dropdown-toggle d-flex align-items-center hidden-arrow" href="#" id="navbarDropdownMenuAvatar"
          role="button" data-mdb-toggle="dropdown" aria-expanded="false">
      <!-- Navbar brand -->
      <% if(loginUser){ %>

          <% if(loginUser.image==null) { %>
            <img
              src="https://toppng.com/uploads/preview/app-icon-set-login-icon-comments-avatar-icon-11553436380yill0nchdm.png"
              class="rounded-circle" height="35" alt="Black and White Portrait of a Man" loading="lazy" />
            <% }else{ %>
              <img style="margin-left: 0.5rem;" src="<%= loginUser.image%>" class="rounded-circle" height="45" alt=""
                width="45" loading="lazy" alt="Not Found" />
              <% } %>
        <% }else{ %>
          <img
            src="https://toppng.com/uploads/preview/app-icon-set-login-icon-comments-avatar-icon-11553436380yill0nchdm.png"
            class="rounded-circle" height="35" alt="Black and White Portrait of a Man" loading="lazy" />
          <% } %>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuAvatar">
          <!-- <li>
            <a class="dropdown-item" href="#">My profile</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Settings</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Logout</a>
          </li> -->
          <% if(loginUser){ %>
            <li>
              <a class="dropdown-item" href="#">
                <%=loginUser.email%>
              </a>
            </li>

            <li>
              <a class="dropdown-item" href="/misRecetas">Mis Recetas</a>
            </li>
            <li>
              <a class="dropdown-item" href="/logout">Cerrar Sesion</a>
            </li>
            <% }else{ %>
              <li>
                <a class="dropdown-item" href="/registro">Registrarse</a>
              </li>
              <li>
                <a class="dropdown-item" href="/login">Iniciar Sesion</a>
              </li>
            <% } %>
        </ul>
      </div>
    </div>
    <!-- Right elements -->
  </div>
  <!-- Container wrapper -->
</nav>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Navbar -->
<%- include('../error/errores') %>
<%- include('../error/success') %>